{
  "info": {
    "_postman_id": "11111111-2222-3333-4444-555555555555",
    "name": "Burjo Lestari Backend",
    "description": "Collection untuk mengetes backend membership & cashback Burjo Lestari.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:4000"
    },
    {
      "key": "api_key",
      "value": "some-super-secret-key"
    },
    {
      "key": "memberId",
      "value": ""
    }
  ],
  "item": [
    {
      "name": "Health Check (tanpa API key)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/health",
          "host": ["{{base_url}}"],
          "path": ["health"]
        }
      }
    },
    {
      "name": "Members",
      "item": [
        {
          "name": "GET /members (list semua member)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "x-api-key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/members",
              "host": ["{{base_url}}"],
              "path": ["members"]
            }
          }
        },
        {
          "name": "GET /members?search= (cari member)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "x-api-key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/members?search=Budi",
              "host": ["{{base_url}}"],
              "path": ["members"],
              "query": [
                {
                  "key": "search",
                  "value": "Budi"
                }
              ]
            }
          }
        },
        {
          "name": "POST /members (buat member baru)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "x-api-key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Budi\",\n  \"whatsapp\": \"08123456789\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/members",
              "host": ["{{base_url}}"],
              "path": ["members"]
            }
          }
        },
        {
          "name": "PATCH /members/:id (update member)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "x-api-key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Budi Update\",\n  \"whatsapp\": \"08129876543\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/members/{{memberId}}",
              "host": ["{{base_url}}"],
              "path": ["members", "{{memberId}}"]
            }
          }
        },
        {
          "name": "DELETE /members/:id (hapus member)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "x-api-key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/members/{{memberId}}",
              "host": ["{{base_url}}"],
              "path": ["members", "{{memberId}}"]
            }
          }
        },
        {
          "name": "GET /members/:id/detail (detail member + saldo)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "x-api-key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/members/{{memberId}}/detail",
              "host": ["{{base_url}}"],
              "path": ["members", "{{memberId}}", "detail"]
            }
          }
        },
        {
          "name": "POST /members/:id/membership/pay (konfirmasi bayar)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "x-api-key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"paidAt\": \"2025-11-25T10:00:00.000+07:00\",\n  \"amount\": 35000\n}"
            },
            "url": {
              "raw": "{{base_url}}/members/{{memberId}}/membership/pay",
              "host": ["{{base_url}}"],
              "path": ["members", "{{memberId}}", "membership", "pay"]
            }
          }
        },
        {
          "name": "POST /members/:id/membership/undo-last-payment (batalkan pembayaran terakhir)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "x-api-key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/members/{{memberId}}/membership/undo-last-payment",
              "host": ["{{base_url}}"],
              "path": [
                "members",
                "{{memberId}}",
                "membership",
                "undo-last-payment"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Transactions",
      "item": [
        {
          "name": "POST /transactions (bayar normal, dapat cashback)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "x-api-key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"memberId\": \"{{memberId}}\",\n  \"totalAmount\": 30000,\n  \"paymentType\": \"cash\",\n  \"cashbackToUse\": 0,\n  \"transactedAt\": \"2025-11-25T12:00:00.000+07:00\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/transactions",
              "host": ["{{base_url}}"],
              "path": ["transactions"]
            }
          }
        },
        {
          "name": "POST /transactions (pakai cashback + cash)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "x-api-key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"memberId\": \"{{memberId}}\",\n  \"totalAmount\": 18500,\n  \"paymentType\": \"cashback\",\n  \"cashbackToUse\": 3500,\n  \"transactedAt\": \"2025-11-25T13:00:00.000+07:00\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/transactions",
              "host": ["{{base_url}}"],
              "path": ["transactions"]
            }
          }
        },
        {
          "name": "GET /transactions (semua transaksi)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "x-api-key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/transactions",
              "host": ["{{base_url}}"],
              "path": ["transactions"]
            }
          }
        },
        {
          "name": "GET /transactions?memberId= (riwayat 1 member)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "x-api-key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/transactions?memberId={{memberId}}",
              "host": ["{{base_url}}"],
              "path": ["transactions"],
              "query": [
                {
                  "key": "memberId",
                  "value": "{{memberId}}"
                }
              ]
            }
          }
        }
      ]
    }
  ]
}
